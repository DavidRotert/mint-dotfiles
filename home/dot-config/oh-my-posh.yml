# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
version: 3
final_space: true
blocks:
  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: os
        style: powerline
        powerline_symbol: ""
        foreground: black
        background: white
        template: "{{ if .Segments.Session.SSHSession }} {{ if .WSL }}WSL at {{ end }}{{.Icon}} {{ end }}"
      - type: session
        style: powerline
        powerline_symbol: ""
        foreground: white
        background: magenta
        template: "{{ if .SSHSession }} {{ .UserName }}@{{ .HostName }} {{ end }}"
      - type: path
        style: powerline
        powerline_symbol: ""
        foreground: white
        background: blue
        template: " {{ if not .Writable }} {{ end }}{{ .Path }} "
        properties:
          style: powerlevel
          max_width: 35
      - type: git
        style: powerline
        powerline_symbol: ""
        foreground: black
        background: green
        background_templates:
          - "{{ if or (.Working.Changed) (.Staging.Changed) }}yellow{{ end }}"
        template: " {{ .HEAD }}{{ $workingCount := add .Working.Added .Working.Deleted .Working.Modified .Working.Untracked }}{{ if gt $workingCount 0 }} -{{ $workingCount }}{{ end }}{{ $stagingCount := add .Staging.Added .Staging.Deleted .Staging.Modified .Staging.Untracked }}{{ if gt $stagingCount 0 }} +{{ $stagingCount }}{{ end }}{{ $unmergedCount := add .Working.Unmerged .Staging.Unmerged }}{{ if gt $unmergedCount 0 }} x{{ $unmergedCount }}{{ end }}{{ if gt .StashCount 0 }} *{{ .StashCount }}{{ end }}{{ if .BranchStatus }} {{ .BranchStatus }}{{ end }} "
        properties:
          fetch_status: true
          fetch_upstream_icon: false
          branch_icon: ""
          branch_identical_icon: ""
          #branch_ahead_icon: ""
          #branch_behind_icon: ""
          #branch_gone_icon: ""

  - type: prompt
    alignment: right
    overflow: break
    segments:
      - type: go
        style: plain
        powerline_symbol: ""
        foreground: white
        background: "#ff007d9c"
        template: "{{ if not .Error }} {{ .Major }}.{{ .Minor }} {{ end }}"
      - type: python
        style: plain
        powerline_symbol: ""
        foreground: black
        background: "#fed43c"
        template: "{{ if not .Error }}  {{ .Major }}.{{ .Minor }} {{ .Venv }} {{ end }}"
        properties:
          fetch_virtual_env: true
          fetch_version: true
          show_version: true
      - type: node
        style: plain
        powerline_symbol: ""
        foreground: white
        background: "#417e38"
        template: "{{ if not .Error }} 󰎙 {{ .Major }}.{{ .Minor }} {{ end }}"
      - type: deno
        style: plain
        powerline_symbol: ""
        foreground: black
        background: lightGreen
        template: "{{ if not .Error }}  {{ .Major }}.{{ .Minor }} {{ end }}"
      - type: executiontime
        style: plain
        powerline_symbol: ""
        foreground: white
        background: black
        properties:
          threshold: 100

  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: status
        style: plain
        template: "❯"
        foreground: green
        foreground_templates:
          - "{{ if .Error }}red{{ end }}"
        properties:
          always_enabled: true
